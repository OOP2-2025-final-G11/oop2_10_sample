<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>図書館ユーザー登録数の推移</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    .chart-container {
      width: 70%;
      margin: 0 auto;
    }
  </style>
</head>

<body>
<h1>図書館ユーザー登録数の推移</h1>

<div class="chart-container">
  <canvas id="userChart"></canvas>
</div>

<script>
  const labels = {{ labels | tojson | safe }};
  const counts = {{ counts | tojson | safe }};

  new Chart(document.getElementById('userChart'), {
    type: 'line',
    data: {
      labels,
      datasets: [{
        label: '累計登録者数（人）',
        data: counts,
        borderColor: 'rgba(75, 192, 192, 1)',      // 線の色
        backgroundColor: 'rgba(75, 192, 192, 0.2)', // 塗りつぶし
        tension: 0.3, // 曲線
        fill: true
      }]
    },
    options: {
      responsive: true,
      scales: {
        y: {
          beginAtZero: true,
          ticks: {
            precision: 0, // 小数点なし
            stepSize: 1   // 1刻み
          },
          title: {
            display: true,
            text: '累計登録者数（人）'
          }
        },
        x: {
          title: {
            display: true,
            text: '年月'
          }
        }
      }
    }
  });
</script>
</body>
</html>